<html>
<head>
  <style>
    .button {
      background-color:#599bb3;
      border-radius:8px;
      display:inline-block;
      cursor:pointer;
      color:#ffffff;
      font-family:Arial;
      font-size:20px;
      font-weight:bold;
      padding:13px 32px;
      text-decoration:none;
      text-shadow:0px 1px 0px #3d768a;
    }
    .light {
      background-color:#000000;
      border-radius:20px;
      display:inline-block;
      cursor:pointer;
      color:#ffffff;
      font-family:Arial;
      font-size:20px;
      font-weight:bold;
      padding:13px 32px;
      text-decoration:none;
      text-shadow:0px 1px 0px #3d768a;
    }
  </style>
  <script language='javascript'>
    function toggle() {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          updateLight();
        }
      };
      xmlhttp.open("PUT", "toggle", true);
      xmlhttp.send();
    }
    function updateLight() {
      var xmlhttp = new XMLHttpRequest();
      xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
          var state = xmlhttp.responseText;
          if (state == 'on') {
            var light = document.getElementById('light');
            light.innerText = 'on';
            light.style.backgroundColor = '#EEEE00';
          } else {
            var light = document.getElementById('light');
            light.innerText = 'off';
            light.style.backgroundColor = '#000000';
          }
        }
      };
      xmlhttp.open("GET", "light", true);
      xmlhttp.send();
    }
  </script>
</head>
<body>
  <div>
    <a href='javascript:toggle();' class='button'>toggle</a>
    <div class='light' id='light'>off</div>
  </div>
  <script language='javascript'>
    updateLight();
  </script>
</body>
</html>
